<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!-- begin SEO -->
  <title>Harris Corner Detection - Marawan Gamal</title>
  <meta property="og:locale" content="en-US" />
  <meta property="og:site_name" content="Marawan Gamal" />
  <meta property="og:title" content="Harris Corner Detection" />
  <link rel="canonical" href="https://marawangamal.github.io/harris-corners-blog.html" />
  <meta property="og:url" content="https://marawangamal.github.io/harris-corners-blog.html" />
  <meta property="og:description" content="An in-depth exploration of the Harris corner detection algorithm, covering the mathematical foundations, implementation details, and practical applications in computer vision." />
  <meta name="description" content="An in-depth exploration of the Harris corner detection algorithm, covering the mathematical foundations, implementation details, and practical applications in computer vision." />
  <meta name="keywords" content="Marawan Gamal, Blog, Computer Vision, Corner Detection, Harris Algorithm" />
  <meta name="author" content="Marawan Gamal" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://marawangamal.github.io/images/profile.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:title" content="Harris Corner Detection - Marawan Gamal" />
  <meta property="twitter:description" content="An in-depth exploration of the Harris corner detection algorithm, covering the mathematical foundations, implementation details, and practical applications in computer vision." />
  <meta property="twitter:image" content="https://marawangamal.github.io/images/profile.png" />
  
  <!-- end SEO -->
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  
  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="../images/favicon-32x32.svg" />
  <link rel="icon" type="image/png" href="../images/favicon-32x32.png" />
  <link rel="shortcut icon" href="../images/favicon.ico" />
  <meta name="theme-color" content="#0066cc" />
  
  <!-- Font loading optimization -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  
  <!-- MathJax for rendering math -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  
  <style>
    /* ===== Color theme ===== */
    :root {
      --text: #1a1a1a;
      --text-light: #555;
      --accent: #0066cc;
      --border: #ddd;
      --bg: #fff;
      --bg-secondary: #f5f5f5;
      --shadow: rgba(0, 0, 0, 0.1);
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --text: #e6e6e6;
        --text-light: #888;
        --accent: #4d9fff;
        --border: #444;
        --bg: #111;
        --bg-secondary: #1a1a1a;
        --shadow: rgba(0, 0, 0, 0.3);
      }
    }

    /* ===== Base ===== */
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;line-height:1.6;font-size:16px;}
    
    /* ===== Navigation (hidden for clean design) ===== */
    header{display:none;}
    
    /* ===== Mobile Header ===== */
    .mobile-header{display:none;position:sticky;top:0;z-index:100;background:var(--bg-secondary);border-bottom:1px solid var(--border);}
    .mobile-header-content{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;}
    .mobile-profile{display:flex;align-items:center;gap:1rem;}
    .mobile-avatar{width:45px;height:45px;border-radius:50%;object-fit:cover;border:2px solid var(--border);}
    .mobile-info h2{font-size:1rem;font-weight:600;margin:0;color:var(--text);}
    .mobile-info p{font-size:0.8rem;color:var(--text-light);margin:0;line-height:1.3;}
    .mobile-menu-btn{display:flex;flex-direction:column;gap:3px;padding:8px;border:none;background:none;cursor:pointer;border-radius:6px;transition:background 0.2s ease;}
    .mobile-menu-btn:hover{background:var(--bg);}
    .mobile-menu-btn span{width:20px;height:2px;background:var(--text);transition:all 0.3s ease;border-radius:1px;}
    .mobile-menu-btn.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px);}
    .mobile-menu-btn.active span:nth-child(2){opacity:0;}
    .mobile-menu-btn.active span:nth-child(3){transform:rotate(-45deg) translate(7px,-6px);}
    
    /* ===== Mobile Menu ===== */
    .mobile-menu{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg);z-index:99;transform:translateX(-100%);transition:transform 0.3s ease;display:flex;flex-direction:column;}
    .mobile-menu.active{transform:translateX(0);}
    .mobile-menu-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;border-bottom:1px solid var(--border);background:var(--bg-secondary);}
    .mobile-menu-close{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-light);padding:8px;border-radius:6px;transition:background 0.2s ease;}
    .mobile-menu-close:hover{background:var(--bg-secondary);}
    .mobile-menu-nav{flex:1;padding:1.5rem;}
    .mobile-menu-nav a{display:block;padding:.8rem;margin-bottom:0.3rem;border-radius:8px;font-size:.9rem;font-weight:500;color:var(--text-light);text-decoration:none;transition:all 0.2s ease;border:1px solid transparent;}
    .mobile-menu-nav a:hover,.mobile-menu-nav a.active{color:var(--accent);background:var(--bg-secondary);border-color:var(--border);}
    .mobile-menu-footer{display:flex;flex-direction:column;gap:.1rem;padding:1.5rem;border-top:1px solid var(--border);background:var(--bg-secondary);}
    .mobile-menu-footer a{display:flex;align-items:center;gap:.5rem;padding:.4rem 0;transition:all 0.2s ease;font-size:.75rem;color:var(--text-light);text-decoration:none;}
    .mobile-menu-footer a:hover{color:var(--accent);}
    .mobile-menu-footer a:hover svg{fill:var(--accent);}
    .mobile-menu-footer svg{width:14px;height:14px;fill:var(--text-light);transition:all 0.2s ease;flex-shrink:0;}
    
    .mobile-footer{display:none;}
    .mobile-footer-links{display:flex;flex-direction:column;gap:.1rem;padding:1.5rem;background:var(--bg-secondary);border-top:1px solid var(--border);}
    .mobile-footer-links a{display:flex;align-items:center;gap:.5rem;padding:.4rem 0;transition:all 0.2s ease;font-size:.75rem;color:var(--text-light);text-decoration:none;}
    .mobile-footer-links a:hover{color:var(--accent);}
    .mobile-footer-links a:hover svg{fill:var(--accent);}
    .mobile-footer-links svg{width:14px;height:14px;fill:var(--text-light);transition:all 0.2s ease;flex-shrink:0;}
    img{display:block;max-width:100%;}
    a{color:var(--accent);text-decoration:none;}
    a:hover{text-decoration:underline;}

    /* ===== Sidebar ===== */
    aside{flex:0 0 300px;padding:2rem 1.5rem;border-right:1px solid var(--border);position:sticky;top:0;height:100vh;display:flex;flex-direction:column;background:var(--bg-secondary);}
    /* ===== Sidebar Header ===== */
    .sidebar-header{display:flex;flex-direction:column;align-items:center;padding-bottom:1.5rem;border-bottom:1px solid var(--border);margin-bottom:1.5rem;}
    .avatar{width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid var(--border);box-shadow:0 2px 8px var(--shadow);margin-bottom:1rem;}
    h1{font-size:1.3rem;font-weight:600;text-align:center;letter-spacing:-0.02em;margin:0 0 0.5rem 0;color:var(--text);}
    .role{font-size:.9rem;color:var(--text-light);text-align:center;line-height:1.4;margin:0;}
    .info{display:flex;align-items:center;justify-content:center;margin-top:0.75rem;}
    .info .location{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:var(--text-light);padding:.4rem .8rem;border-radius:20px;background:var(--bg);border:1px solid var(--border);}
    .info .location span{font-size:0.9em;}
    
    /* ===== Sidebar Navigation ===== */
    .sidebar-nav{display:flex;flex-direction:column;gap:.1rem;flex:1;width:100%;}
    .sidebar-nav a{display:flex;align-items:center;padding:.6rem .8rem;border-radius:8px;font-size:.8rem;font-weight:500;color:var(--text-light);text-decoration:none;transition:all 0.2s ease;position:relative;letter-spacing:-0.005em;}
    .sidebar-nav a::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--accent);border-radius:0 2px 2px 0;transform:scaleY(0);transition:transform 0.2s ease;transform-origin:center;}
    .sidebar-nav a:hover{color:var(--text);background:var(--bg);}
    .sidebar-nav a:hover::before,.sidebar-nav a.active::before{transform:scaleY(1);}
    .sidebar-nav a.active{color:var(--accent);background:var(--bg);font-weight:600;}
    
    /* ===== Sidebar Footer ===== */
    .sidebar-footer{display:flex;flex-direction:column;gap:.1rem;padding-top:1.5rem;border-top:1px solid var(--border);margin-top:auto;}
    .sidebar-footer a{display:flex;align-items:center;gap:.5rem;padding:.4rem 0;transition:all 0.2s ease;font-size:.75rem;color:var(--text-light);text-decoration:none;}
    .sidebar-footer a:hover{color:var(--accent);}
    .sidebar-footer a:hover svg{fill:var(--accent);}
    .sidebar-footer svg{width:14px;height:14px;fill:var(--text-light);transition:all 0.2s ease;flex-shrink:0;}

    /* ===== Main ===== */
    main{flex:1;max-width:800px;margin:0 auto;padding:3rem 2.5rem 4rem;}
    
    /* ===== Blog Post Specific Styles ===== */
    .blog-header {
      margin-bottom: 3rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--border);
    }
    .blog-title {
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 1rem;
      color: var(--text);
    }
    .blog-meta {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    .blog-date {
      color: var(--text-light);
      font-size: 0.9rem;
    }
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--accent);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      margin-bottom: 2rem;
      transition: all 0.2s ease;
    }
    .back-link:hover {
      color: var(--text);
      text-decoration: none;
    }
    .back-link svg {
      width: 16px;
      height: 16px;
      transition: transform 0.2s ease;
    }
    .back-link:hover svg {
      transform: translateX(-4px);
    }
    
    /* ===== Blog Content Styles ===== */
    .blog-content {
      line-height: 1.8;
      color: var(--text);
    }
    .blog-content h1,
    .blog-content h2,
    .blog-content h3,
    .blog-content h4,
    .blog-content h5,
    .blog-content h6 {
      margin: 2rem 0 1rem 0;
      font-weight: 600;
      line-height: 1.3;
      color: var(--text);
    }
    .blog-content h1 {
      font-size: 2rem;
      border-bottom: 2px solid var(--accent);
      padding-bottom: 0.5rem;
    }
    .blog-content h2 {
      font-size: 1.5rem;
      position: relative;
    }
    .blog-content h2::after {
      content: "";
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 30px;
      height: 2px;
      background: var(--accent);
      border-radius: 1px;
    }
    .blog-content h3 {
      font-size: 1.25rem;
    }
    .blog-content p {
      margin: 1.5rem 0;
      color: var(--text);
    }
    .blog-content em {
      color: var(--text-light);
      font-style: italic;
    }
    .blog-content strong {
      font-weight: 600;
      color: var(--text);
    }
    .blog-content ul,
    .blog-content ol {
      margin: 1.5rem 0;
      padding-left: 2rem;
    }
    .blog-content li {
      margin: 0.5rem 0;
      color: var(--text);
    }
    .blog-content blockquote {
      margin: 2rem 0;
      padding: 1rem 1.5rem;
      border-left: 4px solid var(--accent);
      background: var(--bg-secondary);
      border-radius: 0 8px 8px 0;
      color: var(--text-light);
      font-style: italic;
    }
    .blog-content pre {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.5rem;
      overflow-x: auto;
      margin: 2rem 0;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .blog-content code {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 0.2rem 0.5rem;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9em;
      color: var(--text);
    }
    .blog-content pre code {
      background: transparent;
      border: none;
      padding: 0;
    }
    .blog-content img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin: 2rem auto;
      display: block;
      box-shadow: 0 4px 12px var(--shadow);
    }
    
    /* Math equations */
    .blog-content .MathJax {
      font-size: 1.1rem !important;
    }

    /* ===== Responsive ===== */
    @media(max-width:700px){
      body{flex-direction:column;}
      .mobile-header{display:block;}
      .mobile-footer{display:block;}
      aside{display:none;}
      main{padding:1rem 1.5rem 3rem;}
      .blog-title{font-size:2rem;}
      .blog-content h1{font-size:1.75rem;}
      .blog-content h2{font-size:1.25rem;}
      .blog-content h3{font-size:1.1rem;}
      .blog-meta{flex-direction:column;align-items:flex-start;gap:0.5rem;}
    }
  </style>
</head>
<body>
  <header>
    <nav aria-label="Main navigation">
      <ul>
        <li><a href="../index.html">About</a></li>
        <li><a href="../blog.html">Blog</a></li>
      </ul>
    </nav>
  </header>
  
  <div class="mobile-header">
    <div class="mobile-header-content">
      <div class="mobile-profile">
        <img src="../images/profile.png" alt="Marawan Gamal" class="mobile-avatar" />
        <div class="mobile-info">
          <h2>Marawan Gamal</h2>
          <p>PhD Computer Science • Mila / UdeM</p>
        </div>
      </div>
      <button class="mobile-menu-btn" id="mobileMenuBtn">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
  
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
      <h3>Menu</h3>
      <button class="mobile-menu-close" id="mobileMenuClose">×</button>
    </div>
    <nav class="mobile-menu-nav">
      <a href="../index.html">About</a>
      <a href="../index.html#publications">Publications</a>
      <a href="../index.html#projects">Special Projects</a>
      <a href="../index.html#contact">Contact</a>
    </nav>
    <div class="mobile-menu-footer">
      <a href="https://www.linkedin.com/in/marawangamal">
        <svg viewBox="0 0 24 24">
          <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
        </svg>
        LinkedIn
      </a>
      <a href="https://github.com/marawangamal">
        <svg viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        GitHub
      </a>
      <a href="https://scholar.google.com/citations?user=1O_Bb-gAAAAJ&hl=en">
        <svg viewBox="0 0 640 640">
          <path d="M454.9 362.5C454.9 362.5 454.9 362.6 455 362.6C464.2 382 469.4 403.7 469.4 426.6C469.3 509.1 402.5 576 320 576C237.5 576 170.7 509.1 170.7 426.7C170.7 403.8 175.9 382.1 185.1 362.7C186.8 359.1 188.7 355.5 190.7 352C195.1 344.4 200.1 337.3 205.7 330.7C233.1 298.1 274.2 277.4 320.1 277.4C353.7 277.4 384.7 288.5 409.7 307.3C418.8 314.2 427.1 322 434.5 330.8C440.1 337.4 445.1 344.6 449.5 352.1C451.5 355.5 453.3 359.1 455 362.6L454.9 362.5zM481.3 343.7C451.2 285.3 390.3 245.3 320 245.3C249.7 245.3 188.8 285.3 158.7 343.7L64 266.7L320 64L576 266.7L481.3 343.8L481.3 343.7z"/>
        </svg>
        Scholar
      </a>
      <a href="../docs/resume_2025.pdf" target="_blank">
        <svg viewBox="0 0 24 24">
          <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM13 9V3.5L18.5 9H13z"/>
        </svg>
        Resume
      </a>
      <a href="../blog.html">
        <svg viewBox="0 0 24 24">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm3-4H7V7h10v2z"/>
        </svg>
        Blog
      </a>
    </div>
  </div>
  
  <aside>
    <div class="sidebar-header">
      <img src="../images/profile.png" alt="Marawan Gamal" class="avatar" />
      <h1>Marawan Gamal</h1>
      <p class="role">PhD Computer Science<br>Mila / UdeM</p>
      <div class="info">
        <span class="location"><span>📍</span>Montreal</span>
      </div>
    </div>
    <nav class="sidebar-nav">
      <a href="../index.html">About</a>
      <a href="../index.html#publications">Publications</a>
      <a href="../index.html#projects">Special Projects</a>
      <a href="../index.html#contact">Contact</a>
    </nav>
    <div class="sidebar-footer">
      <a href="https://www.linkedin.com/in/marawangamal">
        <svg viewBox="0 0 24 24">
          <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
        </svg>
        LinkedIn
      </a>
      <a href="https://github.com/marawangamal">
        <svg viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        GitHub
      </a>
      <a href="https://scholar.google.com/citations?user=1O_Bb-gAAAAJ&hl=en">
        <svg viewBox="0 0 640 640">
          <path d="M454.9 362.5C454.9 362.5 454.9 362.6 455 362.6C464.2 382 469.4 403.7 469.4 426.6C469.3 509.1 402.5 576 320 576C237.5 576 170.7 509.1 170.7 426.7C170.7 403.8 175.9 382.1 185.1 362.7C186.8 359.1 188.7 355.5 190.7 352C195.1 344.4 200.1 337.3 205.7 330.7C233.1 298.1 274.2 277.4 320.1 277.4C353.7 277.4 384.7 288.5 409.7 307.3C418.8 314.2 427.1 322 434.5 330.8C440.1 337.4 445.1 344.6 449.5 352.1C451.5 355.5 453.3 359.1 455 362.6L454.9 362.5zM481.3 343.7C451.2 285.3 390.3 245.3 320 245.3C249.7 245.3 188.8 285.3 158.7 343.7L64 266.7L320 64L576 266.7L481.3 343.8L481.3 343.7z"/>
        </svg>
        Scholar
      </a>
      <a href="../docs/resume_2025.pdf" target="_blank">
        <svg viewBox="0 0 24 24">
          <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM13 9V3.5L18.5 9H13z"/>
        </svg>
        Resume
      </a>
      <a href="../blog.html">
        <svg viewBox="0 0 24 24">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm3-4H7V7h10v2z"/>
        </svg>
        Blog
      </a>
    </div>
  </aside>

  <main>
    <a href="../blog.html" class="back-link">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back to Blog
    </a>
    
    <div class="blog-header">
      <h1 class="blog-title">Harris Corner Detection</h1>
      <div class="blog-meta">
        <div class="blog-date">August 2020</div>
      </div>
    </div>
    
    <div class="blog-content">
      <!-- <h1>Harris Corners</h1> -->

      <h2>Problem Definition</h2>

      <p>Our goal is to design a function whose shape will tell us whether a point in an image is a corner or not.</p>

      <p>To begin designing this function let's first consider a particular point $\underline{P}$ and only look at a small window $W$ around that point. We want to design a function that will tell us whether our point is a good Keypoint (corner) or not.</p>

      <p><em>[Image placeholder: Window around point P]</em></p>

      <p>Suppose we take another window $W'$ that's centered at a different point $\underline{P}'$ that is very close to $\underline{P}$. That is if $\underline{P} = [x, y]^T$ then $\underline{P}' = [x+u, y+v]^T$ for some small $(u,v)$. Now if we compare the two windows by summing the square differences between corresponding pixels and find that the summation is <strong>large</strong> then this might lead us to thinking that $\underline{P}$ is a good keypoint.</p>

      <p>Why? Because moving the window by just a little bit made a big difference which is essentially what a definition keypoint could be. That is a Keypoint could be defined as a region around point that is unique in an image and therefore comparing this region with any other region (near or far) will give us a relatively large difference.</p>

      <p>If we repeat this process for different small shifts $(u,v)$ and find that we are always getting a large difference or error then we have found a good Keypoint.</p>

      <p><em>[Image placeholder: Different shifts around keypoint]</em></p>

      <p>Going back to the function we want to design, we want a function $E(u,v)$ that will tell us the difference between a window centered at a particular point $\underline{P}$ and a window centered at a point shifted by $(u,v)$ from $\underline{P}$. Mathematically, this desired function is:</p>

      <p>$$E(u,v) = \sum_{x,y} W(x,y) [I(x+u, y+v) - I(x, y)]^2$$</p>

      <p>where</p>

      <p>$$w(x,y) = \begin{cases} 1, & \text{if } (x,y) \in W \\ 0, & \text{Otherwise} \end{cases}$$</p>

      <p>Our claim so far is as follows: If we find that the difference between a window centered at a particular point $\underline{P}$ and every other window centered at any point $\underline{P}'$ that is shifted by any small $(u,v)$ then we will consider P to be a Keypoint.</p>

      <p>Let's look at some examples that back this claim.</p>

      <p><em>[Image placeholder: Examples of corners vs edges vs flat regions]</em></p>

      <h2>Approximation</h2>

      <p>Now we know what we are looking for (points in our image where $E(u,v)$ is large for any small $(u,v)$ in the window around that point).</p>

      <p>This is actually decently computationally intensive as for every candidate point $\underline{P}$ in our image we are computing $E(u,v)$ for over some range $(u,v) \in W$. The run-time for this process would be $O(KN)$ where $K = \text{(window width)} \times \text{(window height)}$ and $N$ is the number of pixels in the image. Additionally, at this point we will have only computed an $E(\cdot, \cdot)$ matrix for every candidate point $\underline{P}$ but will not have decided which points are good corners and which are not. This is the motivation for what follows.</p>

      <p>Instead of actually computing $E(u,v) \quad \forall (u,v) \in W$ at every point or pixel location $\underline{P}$, we will approximate the function $E(u,v)$ by a second order taylor polynomial centered at that particular point.</p>

      <p>If we do this we obtain:</p>

      <p>$$E(u,v) \approx \begin{bmatrix} u & v \end{bmatrix} M \begin{bmatrix} u \\ v \end{bmatrix}$$</p>

      <p>So we can compute $E(u,v)$ for any $(u,v)$ shift from a particular point $\underline{P}$. Furthermore, our error function looks like this:</p>

      <p><em>[Image placeholder: 3D visualization of quadratic error function]</em></p>

      <p>Now, previously we claimed that if $E(u,v)$ is large for all small $(u,v)$ then P is a corner. We are getting closer to an algorithm. Let's consider all $(u,v)$ shifts that give rise to some particular error, that is let's look at a slice of the error function of constant error $K$:</p>

      <p>$$E(u,v) = k = \begin{bmatrix} u & v \end{bmatrix} M \begin{bmatrix} u \\ v \end{bmatrix}$$</p>

      <p>we notice that is a quadratic form and in particular it is an equation of an ellipse. It can be shown that given an ellipse equation written in quadratic form, the major and minor axis lengths of an ellipse are given by:</p>

      <p><em>[Image placeholder: Ellipse with axis lengths marked]</em></p>

      <p>where $\lambda_1$ and $\lambda_2$ are the eigenvalues of matrix $M$. We will see why this is the case in just a bit. For now take it as a property of any ellipse equation.</p>

      <p>We now notice that if we consider all shifts $(u,v)$ that cause the same error $K = E(u,v)$. A <strong>larger</strong> $(u,v)$ shift is needed if the eigenvalues of the matrix M are <strong>small</strong>, as the radius of the ellipse is <strong>large</strong>.</p>

      <p><em>[Image placeholder: Comparison of ellipses with different eigenvalues]</em></p>

      <p>More concretely, suppose we are comparing two candidate points $\underline{P_1}$ and $\underline{P_2}$ and find their corresponding error functions to be:</p>

      <p>$$E_1(u,v) \approx \begin{bmatrix} u & v \end{bmatrix} M_1 \begin{bmatrix} u \\ v \end{bmatrix}$$</p>

      <p>$$E_2(u,v) \approx \begin{bmatrix} u & v \end{bmatrix} M_2 \begin{bmatrix} u \\ v \end{bmatrix}$$</p>

      <p>But we find that the eigenvalues of $M_1$ are larger than the eigenvalues of $M_2$ then we can say that $\underline{P_1}$ is a better keypoint because a <strong>smaller</strong> $(u,v)$ shift causes the <strong>same</strong> error as a <strong>larger</strong> $(u,v)$ shift does at $\underline{P_2}$.</p>

      <h2>Principal Axes Theorem</h2>

      <p>Let $Q$ be a quadratic form on $\mathbb{R}^{N}$ (i.e. $Q(\underline{x}) = \underline{x}^T A \underline{x}$) where $A \in \mathbb{R}^{N \times N}$ is a symmetric matrix. Then we can find an <strong>orthogonal</strong> matrix $P \in \mathbb{R}^{N \times N}$ such that $\underline{x}= P\underline{y}$, transforming $Q(\underline{x}) = \underline{x}^T A \underline{x}$ to $Q(\underline{x}) = \underline{y}^T D \underline{y}$ with no cross terms. ($D$ is a diagonal matrix)</p>

      <p>So why are the radii of the ellipse given by the $r_i = \lambda_i^{1/2}$? This is kind of a long story. First we start with our original equation. Let $\underline{x} = \begin{bmatrix} x_1 & x_2 \end{bmatrix}^T$ and suppose we have the following ellipse equation.</p>

      <p>$$K = \underline{x}^T M \underline{x} = a_1 u^2 + a_2 uv + a_3 v^2$$</p>

      <p>we will need three facts to proceed:</p>

      <ol>
        <li><p><strong>Matrix $\mathbf{M}$ is symmetric</strong> and there is a theorem that states that we can always diagonalize a symmetric matrices - that is we can find a matrix $P$ such that $P^T M P = D$ where $D$ is a diagonal matrix and the columns of $P$ are the eigenvectors of $M$.</p></li>
        
        <li><p><strong>Change of basis</strong>: Another thing we'll need is to recall that any invertible matrix $\mathbf{P} \in \mathbb{R}^{N \times N}$ represents a change of basis from $\eta$-coordinates to $\beta$-coordinates:</p>
        
        <p>$$\underline{x} = P \underline{y} \quad \Longleftrightarrow \quad \underline{y} = P^{-1} \underline{x} \quad \Longleftrightarrow \quad [\underline{y}]_\beta = [\underline{x}]_\eta$$</p></li>
        
        <li><p><strong>Standard Ellipse equation</strong>: The equation of a Standard Ellipse gives an ellipse that is symmetric about the axes.</p>
        
        <p>$$\frac{x^2}{r_1^2} + \frac{y^2}{r_2^2} = k$$</p>
        
        <p>Or in vector form this is:</p>
        
        <p>$$\begin{bmatrix} x & y \end{bmatrix} \begin{bmatrix} 1/r_1^2 & 0 \\ 0 & 1/r_2^2 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} = k$$</p>
        
        <p><em>[Image placeholder: Standard ellipse aligned with axes]</em></p>
        
        <p>Where the radii of this ellipse is then given by $r_1$ and $r_2$. We should note that the more General Equation of an Ellipse does not give us an ellipse symmetric about the axes due to the cross term $bxy$.</p>
        
        <p>$$ax^2 + bxy + cy^2 = k$$</p>
        
        <p><em>[Image placeholder: Rotated ellipse with cross terms]</em></p></li>
      </ol>

      <p>Now we can proceed as follows. Suppose we define a change of basis matrix $P$, and now $x$ can be given by:</p>

      <p>$$\underline{x} = P \underline{y}$$</p>

      <p>where $\underline{x}$ is in standard coordinates and $\underline{y}$ is in a different coordinate system where the columns of $P$ are the basis vectors of that coordinate system. We can then re-write our ellipse equation:</p>

      <p>$$K = \underline{x}^T M \underline{x} = \underline{y}^T P^T A P \underline{y} = \underline{y}^T C \underline{y}$$</p>

      <p>Now we observe two things. First that $K = \underline{y}^T C \underline{y}$ defines the exact same ellipse in space as $K = \underline{x}^T M \underline{x}$. The only difference is the set of all points that make up the ellipse are referenced from a different coordinate system (different basis). Second, $P$ can be any arbitrary change of basis matrix and nothing interesting would happen, we'd be left with this new equation for the same ellipse:</p>

      <p>$$K = \underline{y}^T C \underline{y} = ay_1^2 + by_1y_2 + cy_2^2$$</p>

      <p>However, if instead we choose a change of basis matrix $P$ whose columns are the eigenvectors of A then by <strong>Fact #2</strong> we see that $C = P^T A P = D$ is a <strong>diagonal</strong> matrix. Expanding this out we get:</p>

      <p>$$K = \underline{y}^T D \underline{y} = \begin{bmatrix} y_1 & y_2 \end{bmatrix} \begin{bmatrix} \lambda_1 & 0 \\ 0 & \lambda_2 \end{bmatrix} \begin{bmatrix} y_1 \\ y_2 \end{bmatrix} = \lambda_1y_1^2 + \lambda_2 y_2^2$$</p>

      <p>So by changing our reference frame we've just eliminated our cross term! We can then use <strong>Fact #3</strong> and match coefficients. If we do this we find the following:</p>

      <p>$$\frac{y_1^2}{r_1^2} + \frac{y_2^2}{r_2^2} = k = \lambda_1y_1^2 + \lambda_2 y_2^2$$</p>

      <p>$$\therefore r_1 = \lambda_1^{-1/2} \text{ and } r_2 = \lambda_2^{-1/2}$$</p>

      <h2>Algorithm</h2>

      <p>By now we know that a particular pixel $\underline{P}$ is categorized as a Keypoint if when we compute an error function $E(u,v)$ and take any particular contour $E(u,v) = k$ we see a narrow ellipse. This corresponds to the fact that if we took a small window around that point and shifted it by a little bit then compared it to the original window we'd see a relatively large difference.</p>

      <p>We have also seen that we can quantify the "narrow-ness" of a particular contour or ellipse of $E(u,v)$ by using the eigenvalues of the matrix $M$ in our quadratic form equation:</p>

      <p>$$E(u,v) = \begin{bmatrix} u & v \end{bmatrix} M \begin{bmatrix} u \\ v \end{bmatrix}$$</p>

      <p>So we want to find points in the image that give rise to a quadratic where the $M$ matrix has large eigenvalues. We also want the eigenvalues to be comparable in size. Why? Well if one of the eigenvalues is small this means that the ellipse we are looking at is narrow in one direction and long in the other and therefore our error $E(u,v)$ is high if we shift the window around our point in one direction but is low if we shift it in another direction. This means we are at a line.</p>

      <p>In the original paper "A COMBINED CORNER AND EDGE DETECTOR" the author's proposed the following "corner-ness" score to find points with large eigenvalues that are close in magnitude:</p>

      <p>$$R = \lambda_1 \lambda_2 - \alpha(\lambda_1 + \lambda_2)^2$$</p>

      <p>To interpret this formulation, let's consider two cases. If $\lambda_2$ is large and $\lambda_1$ is small and $\lambda_2 = 10\lambda_1$ and we take $\alpha = 0.05$:</p>

      <p>$$R = \lambda_1 (10\lambda_1) - \alpha(\lambda_1 + (10\lambda_1))^2 = 4\lambda_1^2$$</p>

      <p>If both $\lambda_1$ and $\lambda_2$ are large and $\lambda_1 = \lambda_2 = \lambda$ then we have:</p>

      <p>$$R = \lambda_1 (\lambda_1) - \alpha(\lambda_1 + (\lambda_1))^2 = 0.95\lambda^2$$</p>

      <p>Comparing the above two results we get $4\lambda_1^2$ where $\lambda_1$ is assumed to be relatively small value in the first case and $0.95\lambda^2$ where $\lambda$ is assumed to be a relatively large value in the second case. Therefore the second case would get a higher "corner-ness" score.</p>

      <h3>Harris Corner Detector Algorithm</h3>

      <ol>
        <li><p><strong>Compute M matrix for every pixel:</strong>
        $$M = \sum \begin{bmatrix} I_x^2 & I_x I_y \\ I_x I_y & I_y^2 \end{bmatrix}$$</p></li>

        <li><p><strong>Compute eigenvalues</strong> of every $M$ matrix</p></li>

        <li><p><strong>Compute R</strong> for every pixel using eigenvalues of corresponding $M$ matrices</p></li>

        <li><p><strong>Threshold based on R-score</strong> accordingly</p></li>

        <li><p><strong>Return</strong> top X corners</p></li>
      </ol>

      <h3>Find Fundamental Matrix Algorithm</h3>

      <p><strong>Input:</strong> $I_l, I_r$ (left and right images)</p>

      <ol>
        <li><p><strong>Run RANSAC</strong> for some number of iterations:</p>
        <ul>
          <li>Select k matches from top A matches randomly</li>
          <li>Compute Fundamental matrix by solving least squares problem: $\min \|M \mathbf{f}\|_2^2$</li>
          <li>Store F matrix and error y</li>
        </ul></li>

        <li><p><strong>Select best solution:</strong> $\text{bestF} = \arg\min_y \text{Fmatrix}[F, y]$</p></li>

        <li><p><strong>Return</strong> bestF</p></li>
      </ol>

      <hr>

      <p><em>This blog post explains the mathematical foundation behind the Harris Corner Detector, a fundamental algorithm in computer vision for detecting corner features in images.</em></p>
    </div>
  </main>
  
  <footer class="mobile-footer">
    <div class="mobile-footer-links">
      <a href="https://www.linkedin.com/in/marawangamal">
        <svg viewBox="0 0 24 24">
          <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
        </svg>
        LinkedIn
      </a>
      <a href="https://github.com/marawangamal">
        <svg viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        GitHub
      </a>
      <a href="https://scholar.google.com/citations?user=1O_Bb-gAAAAJ&hl=en">
        <svg viewBox="0 0 640 640">
          <path d="M454.9 362.5C454.9 362.5 454.9 362.6 455 362.6C464.2 382 469.4 403.7 469.4 426.6C469.3 509.1 402.5 576 320 576C237.5 576 170.7 509.1 170.7 426.7C170.7 403.8 175.9 382.1 185.1 362.7C186.8 359.1 188.7 355.5 190.7 352C195.1 344.4 200.1 337.3 205.7 330.7C233.1 298.1 274.2 277.4 320.1 277.4C353.7 277.4 384.7 288.5 409.7 307.3C418.8 314.2 427.1 322 434.5 330.8C440.1 337.4 445.1 344.6 449.5 352.1C451.5 355.5 453.3 359.1 455 362.6L454.9 362.5zM481.3 343.7C451.2 285.3 390.3 245.3 320 245.3C249.7 245.3 188.8 285.3 158.7 343.7L64 266.7L320 64L576 266.7L481.3 343.8L481.3 343.7z"/>
        </svg>
        Scholar
      </a>
      <a href="../docs/resume_2025.pdf" target="_blank">
        <svg viewBox="0 0 24 24">
          <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM13 9V3.5L18.5 9H13z"/>
        </svg>
        Resume
      </a>
      <a href="../blog.html">
        <svg viewBox="0 0 24 24">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm3-4H7V7h10v2z"/>
        </svg>
        Blog
      </a>
    </div>
  </footer>

  <script>
    // Mobile menu functionality
    function toggleMobileMenu() {
      const menuBtn = document.getElementById('mobileMenuBtn');
      const menu = document.getElementById('mobileMenu');
      const closeBtn = document.getElementById('mobileMenuClose');
      
      menuBtn.addEventListener('click', () => {
        menu.classList.add('active');
        menuBtn.classList.add('active');
      });
      
      closeBtn.addEventListener('click', () => {
        menu.classList.remove('active');
        menuBtn.classList.remove('active');
      });
      
      // Close menu when clicking on a link
      document.querySelectorAll('.mobile-menu-nav a').forEach(link => {
        link.addEventListener('click', () => {
          menu.classList.remove('active');
          menuBtn.classList.remove('active');
        });
      });
      
      // Close menu when clicking outside
      menu.addEventListener('click', (e) => {
        if (e.target === menu) {
          menu.classList.remove('active');
          menuBtn.classList.remove('active');
        }
      });
    }
    
    // Initialize on page load
    window.addEventListener('load', () => {
      toggleMobileMenu();
      // Re-render MathJax if available
      if (window.MathJax) {
        MathJax.typesetPromise();
      }
    });
  </script>

</body>
</html>